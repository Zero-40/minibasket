{"version":3,"sources":["Preview.js"],"names":["ICON_SIZE","cache","Preview","mounted","state","image","handleKeyPress","e","key","props","onClick","this","fetchImage","prevProps","url","light","setState","window","fetch","then","response","json","data","thumbnail_url","replace","playIcon","previewTabIndex","flexCenter","display","alignItems","justifyContent","styles","preview","width","height","backgroundImage","undefined","backgroundSize","backgroundPosition","cursor","shadow","background","borderRadius","borderStyle","borderWidth","borderColor","marginLeft","defaultPlayIcon","style","className","tabIndex","onKeyPress","Component"],"mappings":"kNAEMA,EAAY,OAEZC,EAAQ,GAEOC,E,4MACnBC,SAAU,E,EACVC,MAAQ,CACNC,MAAO,M,EAwCTC,eAAiB,SAAAC,GACD,UAAVA,EAAEC,KAA6B,MAAVD,EAAEC,KACzB,EAAKC,MAAMC,W,uDAvCf,WACEC,KAAKR,SAAU,EACfQ,KAAKC,WAAWD,KAAKF,S,gCAGvB,SAAoBI,GAClB,MAAuBF,KAAKF,MAApBK,EAAR,EAAQA,IAAKC,EAAb,EAAaA,MACTF,EAAUC,MAAQA,GAAOD,EAAUE,QAAUA,GAC/CJ,KAAKC,WAAWD,KAAKF,S,kCAIzB,WACEE,KAAKR,SAAU,I,wBAGjB,YAA6B,IAAD,OAAdW,EAAc,EAAdA,IAAKC,EAAS,EAATA,MACjB,GAAqB,kBAAVA,EAAX,CAIA,IAAId,EAAMa,GAKV,OADAH,KAAKK,SAAS,CAAEX,MAAO,OAChBY,OAAOC,MAAP,wCAA8CJ,IAClDK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACJ,GAAIA,EAAKC,eAAiB,EAAKpB,QAAS,CACtC,IAAME,EAAQiB,EAAKC,cAAcC,QAAQ,aAAc,cACvD,EAAKR,SAAS,CAAEX,UAChBJ,EAAMa,GAAOT,MAVjBM,KAAKK,SAAS,CAAEX,MAAOJ,EAAMa,UAJ7BH,KAAKK,SAAS,CAAEX,MAAOU,M,oBAyB3B,WACE,MAA+CJ,KAAKF,MAA5CC,EAAR,EAAQA,QAASe,EAAjB,EAAiBA,SAAUC,EAA3B,EAA2BA,gBACnBrB,EAAUM,KAAKP,MAAfC,MACFsB,EAAa,CACjBC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAEZC,EAAS,CACbC,QAAQ,aACNC,MAAO,OACPC,OAAQ,OACRC,gBAAiB9B,EAAK,cAAUA,EAAV,UAAqB+B,EAC3CC,eAAgB,QAChBC,mBAAoB,SACpBC,OAAQ,WACLZ,GAELa,OAAO,aACLC,WAAY,2DACZC,aAAc1C,EACdiC,MAAOjC,EACPkC,OAAQlC,GACL2B,GAELF,SAAU,CACRkB,YAAa,QACbC,YAAa,mBACbC,YAAa,4CACbC,WAAY,QAGVC,EACJ,qBAAKC,MAAOjB,EAAOS,OAAQS,UAAU,uBAArC,SACE,qBAAKD,MAAOjB,EAAON,SAAUwB,UAAU,8BAG3C,OACE,qBACED,MAAOjB,EAAOC,QACdiB,UAAU,wBACVvC,QAASA,EACTwC,SAAUxB,EACVyB,WAAYxC,KAAKL,eALnB,SAOGmB,GAAYsB,Q,GA9FgBK","file":"static/js/reactPlayerPreview.64ea782b.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nconst ICON_SIZE = '64px'\n\nconst cache = {}\n\nexport default class Preview extends Component {\n  mounted = false\n  state = {\n    image: null\n  }\n\n  componentDidMount () {\n    this.mounted = true\n    this.fetchImage(this.props)\n  }\n\n  componentDidUpdate (prevProps) {\n    const { url, light } = this.props\n    if (prevProps.url !== url || prevProps.light !== light) {\n      this.fetchImage(this.props)\n    }\n  }\n\n  componentWillUnmount () {\n    this.mounted = false\n  }\n\n  fetchImage ({ url, light }) {\n    if (typeof light === 'string') {\n      this.setState({ image: light })\n      return\n    }\n    if (cache[url]) {\n      this.setState({ image: cache[url] })\n      return\n    }\n    this.setState({ image: null })\n    return window.fetch(`https://noembed.com/embed?url=${url}`)\n      .then(response => response.json())\n      .then(data => {\n        if (data.thumbnail_url && this.mounted) {\n          const image = data.thumbnail_url.replace('height=100', 'height=480')\n          this.setState({ image })\n          cache[url] = image\n        }\n      })\n  }\n\n  handleKeyPress = e => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this.props.onClick()\n    }\n  }\n\n  render () {\n    const { onClick, playIcon, previewTabIndex } = this.props\n    const { image } = this.state\n    const flexCenter = {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n    const styles = {\n      preview: {\n        width: '100%',\n        height: '100%',\n        backgroundImage: image ? `url(${image})` : undefined,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        cursor: 'pointer',\n        ...flexCenter\n      },\n      shadow: {\n        background: 'radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)',\n        borderRadius: ICON_SIZE,\n        width: ICON_SIZE,\n        height: ICON_SIZE,\n        ...flexCenter\n      },\n      playIcon: {\n        borderStyle: 'solid',\n        borderWidth: '16px 0 16px 26px',\n        borderColor: 'transparent transparent transparent white',\n        marginLeft: '7px'\n      }\n    }\n    const defaultPlayIcon = (\n      <div style={styles.shadow} className='react-player__shadow'>\n        <div style={styles.playIcon} className='react-player__play-icon' />\n      </div>\n    )\n    return (\n      <div\n        style={styles.preview}\n        className='react-player__preview'\n        onClick={onClick}\n        tabIndex={previewTabIndex}\n        onKeyPress={this.handleKeyPress}\n      >\n        {playIcon || defaultPlayIcon}\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}
{"version":3,"sources":["players/YouTube.js"],"names":["SDK_GLOBAL","MATCH_PLAYLIST","MATCH_USER_UPLOADS","MATCH_NOCOOKIE","YouTube","callPlayer","parsePlaylist","url","Array","listType","playlist","map","getID","join","test","match","list","replace","onStateChange","event","data","props","onPlay","onPause","onBuffer","onBufferEnd","onEnded","onReady","loop","config","playerVars","onUnstarted","window","PlayerState","UNSTARTED","PLAYING","PAUSED","BUFFERING","ENDED","CUED","isPlaylist","start","seekTo","play","mute","unmute","ref","container","this","onMount","MATCH_URL_YOUTUBE","isReady","playing","muted","playsinline","controls","onError","embedOptions","id","player","loadPlaylist","cueVideoById","videoId","startSeconds","parseStartTime","endSeconds","parseEndTime","end","getSDK","YT","loaded","then","Player","width","height","autoplay","origin","location","events","setLoop","host","undefined","console","warn","document","body","contains","amount","pause","fraction","rate","getDuration","style","display","Component","displayName","canPlay","youtube"],"mappings":"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","file":"static/js/reactPlayerYouTube.167a1d70.chunk.js","sourcesContent":["import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, parseStartTime, parseEndTime } from '../utils'\nimport { canPlay, MATCH_URL_YOUTUBE } from '../patterns'\n\nconst SDK_URL = 'https://www.youtube.com/iframe_api'\nconst SDK_GLOBAL = 'YT'\nconst SDK_GLOBAL_READY = 'onYouTubeIframeAPIReady'\nconst MATCH_PLAYLIST = /[?&](?:list|channel)=([a-zA-Z0-9_-]+)/\nconst MATCH_USER_UPLOADS = /user\\/([a-zA-Z0-9_-]+)\\/?/\nconst MATCH_NOCOOKIE = /youtube-nocookie\\.com/\nconst NOCOOKIE_HOST = 'https://www.youtube-nocookie.com'\n\nexport default class YouTube extends Component {\n  static displayName = 'YouTube'\n  static canPlay = canPlay.youtube\n  callPlayer = callPlayer\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  getID (url) {\n    if (!url || url instanceof Array || MATCH_PLAYLIST.test(url)) {\n      return null\n    }\n    return url.match(MATCH_URL_YOUTUBE)[1]\n  }\n\n  load (url, isReady) {\n    const { playing, muted, playsinline, controls, loop, config, onError } = this.props\n    const { playerVars, embedOptions } = config\n    const id = this.getID(url)\n    if (isReady) {\n      if (MATCH_PLAYLIST.test(url) || MATCH_USER_UPLOADS.test(url) || url instanceof Array) {\n        this.player.loadPlaylist(this.parsePlaylist(url))\n        return\n      }\n      this.player.cueVideoById({\n        videoId: id,\n        startSeconds: parseStartTime(url) || playerVars.start,\n        endSeconds: parseEndTime(url) || playerVars.end\n      })\n      return\n    }\n    getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY, YT => YT.loaded).then(YT => {\n      if (!this.container) return\n      this.player = new YT.Player(this.container, {\n        width: '100%',\n        height: '100%',\n        videoId: id,\n        playerVars: {\n          autoplay: playing ? 1 : 0,\n          mute: muted ? 1 : 0,\n          controls: controls ? 1 : 0,\n          start: parseStartTime(url),\n          end: parseEndTime(url),\n          origin: window.location.origin,\n          playsinline: playsinline ? 1 : 0,\n          ...this.parsePlaylist(url),\n          ...playerVars\n        },\n        events: {\n          onReady: () => {\n            if (loop) {\n              this.player.setLoop(true) // Enable playlist looping\n            }\n            this.props.onReady()\n          },\n          onStateChange: this.onStateChange,\n          onError: event => onError(event.data)\n        },\n        host: MATCH_NOCOOKIE.test(url) ? NOCOOKIE_HOST : undefined,\n        ...embedOptions\n      })\n    }, onError)\n    if (embedOptions.events) {\n      console.warn('Using `embedOptions.events` will likely break things. Use ReactPlayerâ€™s callback props instead, eg onReady, onPlay, onPause')\n    }\n  }\n\n  parsePlaylist = (url) => {\n    if (url instanceof Array) {\n      return {\n        listType: 'playlist',\n        playlist: url.map(this.getID).join(',')\n      }\n    }\n    if (MATCH_PLAYLIST.test(url)) {\n      const [, playlistId] = url.match(MATCH_PLAYLIST)\n      return {\n        listType: 'playlist',\n        list: playlistId.replace(/^UC/, 'UU')\n      }\n    }\n    if (MATCH_USER_UPLOADS.test(url)) {\n      const [, username] = url.match(MATCH_USER_UPLOADS)\n      return {\n        listType: 'user_uploads',\n        list: username\n      }\n    }\n    return {}\n  }\n\n  onStateChange = (event) => {\n    const { data } = event\n    const { onPlay, onPause, onBuffer, onBufferEnd, onEnded, onReady, loop, config: { playerVars, onUnstarted } } = this.props\n    const { UNSTARTED, PLAYING, PAUSED, BUFFERING, ENDED, CUED } = window[SDK_GLOBAL].PlayerState\n    if (data === UNSTARTED) onUnstarted()\n    if (data === PLAYING) {\n      onPlay()\n      onBufferEnd()\n    }\n    if (data === PAUSED) onPause()\n    if (data === BUFFERING) onBuffer()\n    if (data === ENDED) {\n      const isPlaylist = !!this.callPlayer('getPlaylist')\n      // Only loop manually if not playing a playlist\n      if (loop && !isPlaylist) {\n        if (playerVars.start) {\n          this.seekTo(playerVars.start)\n        } else {\n          this.play()\n        }\n      }\n      onEnded()\n    }\n    if (data === CUED) onReady()\n  }\n\n  play () {\n    this.callPlayer('playVideo')\n  }\n\n  pause () {\n    this.callPlayer('pauseVideo')\n  }\n\n  stop () {\n    if (!document.body.contains(this.callPlayer('getIframe'))) return\n    this.callPlayer('stopVideo')\n  }\n\n  seekTo (amount) {\n    this.callPlayer('seekTo', amount)\n    if (!this.props.playing) {\n      this.pause()\n    }\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction * 100)\n  }\n\n  mute = () => {\n    this.callPlayer('mute')\n  }\n\n  unmute = () => {\n    this.callPlayer('unMute')\n  }\n\n  setPlaybackRate (rate) {\n    this.callPlayer('setPlaybackRate', rate)\n  }\n\n  setLoop (loop) {\n    this.callPlayer('setLoop', loop)\n  }\n\n  getDuration () {\n    return this.callPlayer('getDuration')\n  }\n\n  getCurrentTime () {\n    return this.callPlayer('getCurrentTime')\n  }\n\n  getSecondsLoaded () {\n    return this.callPlayer('getVideoLoadedFraction') * this.getDuration()\n  }\n\n  ref = container => {\n    this.container = container\n  }\n\n  render () {\n    const { display } = this.props\n    const style = {\n      width: '100%',\n      height: '100%',\n      display\n    }\n    return (\n      <div style={style}>\n        <div ref={this.ref} />\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}